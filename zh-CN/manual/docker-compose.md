---
outline: false
aside: false
layout: doc
date: 2025-05
title: docker-compose.yamlè¯­æ³•è§„åˆ™
description: docker-compose.yamlè¯­æ³•è§„åˆ™
category: æ–‡æ¡£
pageClass: manual-page-class
---

# docker-compose.yamlè¯­æ³•è§„åˆ™ #

## ç‰ˆæœ¬ï¼ˆversionï¼‰ ##

- **å«ä¹‰**ï¼šæŒ‡å®š Compose æ–‡ä»¶çš„ç‰ˆæœ¬ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```text
version: '3.8'
```

## æœåŠ¡ï¼ˆservicesï¼‰ ##

- **å«ä¹‰**ï¼šå®šä¹‰åº”ç”¨çš„æœåŠ¡ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰

### æœåŠ¡ä¸‹çš„å…³é”®å­— ###

#### build ####

- **å«ä¹‰**ï¼šé…ç½®æ„å»ºæ—¶ä¿¡æ¯ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰æˆ–æ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
build: ./path/to/dockerfile
# æˆ–
build:
  context: ./path/to/dockerfile
  dockerfile: Dockerfile-alternate
```

#### cap_add, cap_drop ####

- **å«ä¹‰**ï¼šæ·»åŠ æˆ–åˆ é™¤å®¹å™¨çš„èƒ½åŠ›ï¼ˆLinux capabilitiesï¼‰ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
cap_add:
  - ALL
```

#### command ####

- **å«ä¹‰**ï¼šè¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰æˆ–å­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
command: ["bundle", "exec", "thin", "-p", "3000"]
# æˆ–
command: bundle exec thin -p 3000
```

#### configs ####

- **å«ä¹‰**ï¼šå°†é…ç½®é¡¹æ·»åŠ åˆ°å®¹å™¨ä¸­ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰æˆ–æ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
configs:
  - my_config
# æˆ–
configs:
  my_config:
    external: true
```

#### cgroup_parent ####

- **å«ä¹‰**ï¼šæŒ‡å®šä¸€ä¸ªå¯é€‰çš„çˆ¶ cgroup ç”¨äºå®¹å™¨ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
cgroup_parent: m-executor-abcd
```

#### container_name ####

- **å«ä¹‰**ï¼šæŒ‡å®šè‡ªå®šä¹‰å®¹å™¨åç§°ï¼Œè€Œä¸æ˜¯ç”Ÿæˆçš„é»˜è®¤åç§°ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
container_name: my-web-container
```

#### depends_on ####

- **å«ä¹‰**ï¼šæŒ‡å®šæœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå½±å“å¯åŠ¨é¡ºåºã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
depends_on:
  - db
  - redis
```

#### deploy ####

- **å«ä¹‰**ï¼šæŒ‡å®šä¸æœåŠ¡çš„éƒ¨ç½²å’Œè¿è¡Œæœ‰å…³çš„é…ç½®ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
deploy:
  replicas: 3
  update_config:
    order: start-first
```

#### devices ####

- **å«ä¹‰**ï¼šæŒ‡å®šè®¾å¤‡æ˜ å°„åˆ—è¡¨ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
devices:
  - "/dev/ttyUSB0:/dev/ttyUSB0"
```

#### dns ####

- **å«ä¹‰**ï¼šè‡ªå®šä¹‰ DNS æœåŠ¡å™¨ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
dns:
  - 8.8.8.8
  - 8.8.4.4
```

#### dns_search ####

- **å«ä¹‰**ï¼šè‡ªå®šä¹‰ DNS æœç´¢åŸŸã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
dns_search:
  - mydomain.com
```

#### entrypoint ####

- **å«ä¹‰**ï¼šè¦†ç›–å®¹å™¨çš„é»˜è®¤å…¥å£ç‚¹ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰æˆ–å­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
entrypoint: ["php", "-d", "memory_limit=-1", "vendor/bin/phpunit"]
# æˆ–
entrypoint: php -d memory_limit=-1 vendor/bin/phpunit
```

#### env_file ####

- **å«ä¹‰**ï¼šä»ä¸€ä¸ªæ–‡ä»¶ä¸­å¼•å…¥ç¯å¢ƒå˜é‡ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
env_file:
  - web-.env
```

#### environment ####

- **å«ä¹‰**ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰æˆ–æ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
environment:
  RACK_ENV: development
  SHOW: "true"
# æˆ–
environment:
  - RACK_ENV=development
  - SHOW=true
```

#### expose ####

- **å«ä¹‰**ï¼šæš´éœ²ç«¯å£ï¼Œä½†ä¸æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œåªè¢«è¿æ¥çš„æœåŠ¡è®¿é—®ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
expose:
  - "8080"
```

#### extra_hosts ####

- **å«ä¹‰**ï¼šæ·»åŠ ä¸»æœºåæ˜ å°„ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
extra_hosts:
  - "host.docker.internal:host-gateway"
```

#### healthcheck ####

- **å«ä¹‰**ï¼šé…ç½®è¿è¡Œå¥åº·æ£€æŸ¥çš„å‘½ä»¤ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost"]
  interval: 10s
  timeout: 1s
```

#### image ####

- **å«ä¹‰**ï¼šæŒ‡å®šå®¹å™¨å¯åŠ¨æ‰€ä½¿ç”¨çš„é•œåƒã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
image: nginx:latest
```

#### labels ####

- **å«ä¹‰**ï¼šæ·»åŠ å…ƒæ•°æ®åˆ°å®¹å™¨ï¼Œä»¥â€œlabelâ€å½¢å¼ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
labels:
  com.example.version: 1.0.0
```

#### links ####

- **å«ä¹‰**ï¼šé“¾æ¥åˆ°å…¶å®ƒæœåŠ¡ä¸­çš„å®¹å™¨ï¼Œå·²è¢«åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨ç½‘ç»œåˆ«åã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
links:
  - db
  - redis
```

#### logging ####

- **å«ä¹‰**ï¼šé…ç½®æ—¥å¿—é©±åŠ¨ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
logging:
  driver: "json-file"
```

#### network_mode ####

- **å«ä¹‰**ï¼šè®¾ç½®ç½‘ç»œæ¨¡å¼ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
network_mode: "bridge"
```

#### networks ####

- **å«ä¹‰**ï¼šå°†å®¹å™¨åŠ å…¥æŒ‡å®šç½‘ç»œã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰æˆ–æ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
networks:
  - webnet
```

#### ports ####

- **å«ä¹‰**ï¼šæ˜ å°„å®¹å™¨ç«¯å£åˆ°å®¿ä¸»æœºã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
ports:
  - "80:80"
  - "443:443"
```

#### restart ####

- **å«ä¹‰**ï¼šé…ç½®å®¹å™¨çš„é‡å¯ç­–ç•¥ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
restart: always
```

#### secrets ####

- **å«ä¹‰**ï¼šé…ç½®å­˜å‚¨æ•æ„Ÿæ•°æ®ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰æˆ–æ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
secrets:
  - my_secret
# æˆ–
secrets:
  my_secret:
    external: true
```

#### security_opt ####

- **å«ä¹‰**ï¼šä¸ºæ¯ä¸ªå®¹å™¨è¦†ç›–é»˜è®¤çš„æ ‡ç­¾ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ•°ç»„ï¼ˆarrayï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
security_opt:
  - "apparmor:unconfined"
```

#### stop_grace_period ####

- **å«ä¹‰**ï¼šæŒ‡å®šåœ¨å®¹å™¨æ— æ³•å¤„ç† SIGTERM ä¿¡å·ï¼Œç­‰å¾…å¤šä¹…åå‘é€ SIGKILL ä¿¡å·å¼ºåˆ¶åœæ­¢å®¹å™¨ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
stop_grace_period: 10s
```

#### stop_signal ####

- **å«ä¹‰**ï¼šè®¾ç½®æ›¿ä»£ä¿¡å·æ¥åœæ­¢å®¹å™¨ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
stop_signal: SIGINT
```

## ç½‘ç»œï¼ˆnetworksï¼‰ ##

- **å«ä¹‰**ï¼šå®šä¹‰è‡ªå®šä¹‰ç½‘ç»œã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰

### ç½‘ç»œä¸‹çš„å…³é”®å­— ###

#### driver ####

- **å«ä¹‰**ï¼šæŒ‡å®šç½‘ç»œé©±åŠ¨ç±»å‹ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
driver: bridge
```

#### driver_opts ####

- **å«ä¹‰**ï¼šæŒ‡å®šç½‘ç»œé©±åŠ¨ç¨‹åºé€‰é¡¹ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
driver_opts:
  com.docker.network.bridge.enable_icc: "true"
```

#### external ####

- **å«ä¹‰**ï¼šæŒ‡å®šç½‘ç»œæ˜¯å¦æ˜¯å¤–éƒ¨å®šä¹‰çš„ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå¸ƒå°”å€¼ï¼ˆbooleanï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
external: true
```

#### ipam ####

- **å«ä¹‰**ï¼šè‡ªå®šä¹‰ IPAM é…ç½®ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
ipam:
  driver: default
```

#### internal ####

- **å«ä¹‰**ï¼šé™åˆ¶å¯¹ç½‘ç»œçš„è®¿é—®ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå¸ƒå°”å€¼ï¼ˆbooleanï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
internal: true
```

#### labels ####

- **å«ä¹‰**ï¼šä¸ºç½‘ç»œæ·»åŠ å…ƒæ•°æ®ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
labels:
  com.example.version: 1.0.0
```

#### name ####

- **å«ä¹‰**ï¼šä¸ºç½‘ç»œè®¾ç½®è‡ªå®šä¹‰åç§°ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
name: webnet
```

## å·ï¼ˆvolumesï¼‰ ##

- **å«ä¹‰**ï¼šå®šä¹‰å‘½åå·ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰

### å·ä¸‹çš„å…³é”®å­— ###

#### driver ####

- **å«ä¹‰**ï¼šæŒ‡å®šå·é©±åŠ¨ç±»å‹ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
driver: local
```

#### driver_opts ####

- **å«ä¹‰**ï¼šæŒ‡å®šå·é©±åŠ¨ç¨‹åºé€‰é¡¹ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
driver_opts:
  o: bind
```

#### external ####

- **å«ä¹‰**ï¼šæŒ‡å®šå·æ˜¯å¦æ˜¯å¤–éƒ¨å®šä¹‰çš„ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå¸ƒå°”å€¼ï¼ˆbooleanï¼‰æˆ–æ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
external: true
```

#### labels ####

- **å«ä¹‰**ï¼šä¸ºå·æ·»åŠ å…ƒæ•°æ®ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
labels:
  com.example.version: 1.0.0
```

#### name ####

- **å«ä¹‰**ï¼šä¸ºå·è®¾ç½®è‡ªå®šä¹‰åç§°ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
name: webdata
```

## é…ç½®é¡¹ï¼ˆconfigsï¼‰ ##

- **å«ä¹‰**ï¼šå®šä¹‰é…ç½®é¡¹ï¼Œå¯ä»¥åœ¨æœåŠ¡ä¸­å¼•ç”¨ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰

### é…ç½®é¡¹ä¸‹çš„å…³é”®å­— ###

#### file ####

- **å«ä¹‰**ï¼šæŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
file: ./path/to/config.yml
```

#### external ####

- **å«ä¹‰**ï¼šæŒ‡å®šé…ç½®é¡¹æ˜¯å¦æ˜¯å¤–éƒ¨å®šä¹‰çš„ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå¸ƒå°”å€¼ï¼ˆbooleanï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
external: true
```

#### name ####

- **å«ä¹‰**ï¼šä¸ºé…ç½®é¡¹è®¾ç½®è‡ªå®šä¹‰åç§°ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
name: my_config
```

## å¯†é’¥ï¼ˆsecretsï¼‰ ##

- **å«ä¹‰**ï¼šå®šä¹‰æ•æ„Ÿæ•°æ®ï¼Œå¯ä»¥åœ¨æœåŠ¡ä¸­å¼•ç”¨ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šæ˜ å°„ï¼ˆmapï¼‰

### å¯†é’¥ä¸‹çš„å…³é”®å­— ###

#### file ####

- **å«ä¹‰**ï¼šæŒ‡å®šåŒ…å«å¯†é’¥å†…å®¹çš„æ–‡ä»¶è·¯å¾„ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
file: ./path/to/secret.txt
```

#### external ####

- **å«ä¹‰**ï¼šæŒ‡å®šå¯†é’¥æ˜¯å¦æ˜¯å¤–éƒ¨å®šä¹‰çš„ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå¸ƒå°”å€¼ï¼ˆbooleanï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
external: true
```

#### name ####

- **å«ä¹‰**ï¼šä¸ºå¯†é’¥è®¾ç½®è‡ªå®šä¹‰åç§°ã€‚
- **æ‰€éœ€å€¼ç»“æ„**ï¼šå­—ç¬¦ä¸²ï¼ˆstringï¼‰
- **ç¤ºä¾‹**ï¼š

```yaml
name: my_secret
```

## å®Œæ•´ç¤ºä¾‹&æ³¨æ„è¯´æ˜ ##

ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«ä¸Šè¿°å…³é”®å­—çš„ `docker-compose.yml` æ–‡ä»¶ç¤ºä¾‹ï¼š

```yaml
# æ³¨æ„ğŸ“¢ï¼Œå¦‚æœæ˜¯å…³é”®å­—ï¼Œå…¶å†’å·åé¢éƒ½æœ‰ç©ºæ ¼æˆ–å›è½¦

version: '3.8' #å†’å·åé¢æœ‰ç©ºæ ¼ï¼Œæ˜¯kvå¯¹ï¼Œå€¼ä¸ºå­—ç¬¦ä¸²

services: #å€¼æ˜¯mapï¼Œæœ‰æ¢è¡Œï¼Œå…¶åçš„webå’Œdbæ˜¯å…³é”®å­—
  web:
    image: nginx:latest #nginx:latestæ˜¯å­—ç¬¦ä¸²ï¼Œé‡Œé¢çš„å†’å·åæ²¡ç©ºæ ¼
    ports: #å€¼æ˜¯åˆ—è¡¨ï¼Œåˆ—è¡¨çš„å…ƒç´ å€¼æ˜¯å­—ç¬¦ä¸²
      - "80:80" #æ˜¯å­—ç¬¦ä¸²
    environment: #å€¼æ˜¯åˆ—è¡¨ï¼Œåˆ—è¡¨çš„å…ƒç´ å€¼æ˜¯å­—ç¬¦ä¸²
      - NGINX_HOST=example.com #æ˜¯å­—ç¬¦ä¸²
    volumes: #å€¼æ˜¯åˆ—è¡¨ï¼Œåˆ—è¡¨çš„å…ƒç´ å€¼æ˜¯å­—ç¬¦ä¸²
      - /data/nginx:/usr/share/nginx/html #æ˜¯å­—ç¬¦ä¸²
    networks:
      - webnet

  db:
    image: mysql:5.7 #å­—ç¬¦ä¸²ï¼Œå¦‚æœå†’å·åé¢æœ‰ç©ºæ ¼æ‰ç®—æ˜¯kvå¯¹ï¼Œæœ€å¥½ä½¿ç”¨åŒå¼•å·åŒ…å›´å¥½
    environment:
      - MYSQL_ROOT_PASSWORD=root #å­—ç¬¦ä¸²
      - MYSQL_DATABASE=example
    volumes:
      - db_data:/var/lib/mysql #è¿™ç§ç®—æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœå†’å·åé¢æœ‰ç©ºæ ¼æ‰ç®—æ˜¯kvå¯¹
    networks:
      - webnet

networks:
  webnet:
    driver: bridge

volumes:
  db_data:
    driver: local
```

è¿™ä¸ªä¾‹å­ä¸­å®šä¹‰äº†ä¸¤ä¸ªæœåŠ¡ï¼šweb å’Œ dbï¼Œå®ƒä»¬åˆ†åˆ«ä½¿ç”¨ nginx å’Œ mysql é•œåƒã€‚web æœåŠ¡æ˜ å°„äº†ç«¯å£ 80ï¼Œå¹¶è®¾ç½®äº†ç¯å¢ƒå˜é‡ã€‚db æœåŠ¡è®¾ç½®äº†æ•°æ®åº“çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶æŒ‚è½½äº†ä¸€ä¸ªå·ã€‚ä¸¤ä¸ªæœåŠ¡éƒ½åŠ å…¥äº†åä¸º webnet çš„ç½‘ç»œã€‚æ­¤å¤–ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸º db_data çš„å·ã€‚
